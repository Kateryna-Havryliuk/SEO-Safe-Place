<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –ø—Å–∏—Ö–æ–ª–æ–≥—ñ—á–Ω–æ—ó –ø—ñ–¥—Ç—Ä–∏–º–∫–∏</title>
    <!-- –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- –í–ª–∞—Å–Ω—ñ CSS —Ñ–∞–π–ª–∏ -->
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/analytics.css">
    <script>
        (function() {
            const isAnalytics = window.location.pathname.includes('analytics');
            if (isAnalytics) {
                document.documentElement.setAttribute('data-theme', 'light');
                localStorage.setItem('theme', 'light');
            } else {
                const saved = localStorage.getItem('theme');
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                const theme = saved || (prefersDark ? 'dark' : 'light');
                document.documentElement.setAttribute('data-theme', theme);
            }
            document.documentElement.style.visibility = 'hidden';
        })();
    </script>
</head>



<body>
    <div class="container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ -->
        <div class="header">
            <h1>üìä –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –ø—Å–∏—Ö–æ–ª–æ–≥—ñ—á–Ω–æ—ó –ø—ñ–¥—Ç—Ä–∏–º–∫–∏</h1>
            <p>–ê–Ω–∞–ª—ñ–∑ –µ–º–æ—Ü—ñ–π–Ω–∏—Ö —Å—Ç–∞–Ω—ñ–≤ —Ç–∞ —Ç–µ–Ω–¥–µ–Ω—Ü—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</p>
        </div>

            
        <div id="content">
            <!-- –ë–ª–æ–∫ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ -->
            <div class="login-prompt" id="loginPrompt">
                <h2>üîê –ù–µ–æ–±—Ö—ñ–¥–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è</h2>
                <p>–î–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ –±—É–¥—å –ª–∞—Å–∫–∞ —É–≤—ñ–π–¥—ñ—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É</p>
                <button onclick="window.location.href = 'index.html'" 
                        style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer;">
                    –ü–µ—Ä–µ–π—Ç–∏ –¥–æ –≤—Ö–æ–¥—É
                </button>
            </div>

            <!-- –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ (–ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø—ñ—Å–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó) -->
            <div id="analyticsContent" style="display: none;">
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω—ñ –∫–∞—Ä—Ç–∫–∏ -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div>üë• –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</div>
                        <div class="stat-number" id="totalUsers">0</div>
                    </div>
                    <div class="stat-card">
                        <div>üí¨ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å</div>
                        <div class="stat-number" id="totalMessages">0</div>
                    </div>
                    <div class="stat-card">
                        <div>‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω–∏—Ö</div>
                        <div class="stat-number" id="criticalMessages">0</div>
                    </div>
                    <div class="stat-card">
                        <div>üìà –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</div>
                        <div class="stat-number" id="weeklyActivity">0</div>
                    </div>
                </div>

                <!-- –†—è–¥ –∑ –≥—Ä–∞—Ñ—ñ–∫–∞–º–∏ -->
                <div class="chart-row">
                    <div class="chart-container">
                        <h3>üìä –ü–æ–ø—É–ª—è—Ä–Ω—ñ —Ç–µ–º–∏</h3>
                        <canvas id="topicsChart" width="400" height="300"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>üòä –¢–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º</h3>
                        <canvas id="sentimentChart" width="400" height="300"></canvas>
                    </div>
                </div>

                <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω—ñ –∫–∞—Ä—Ç–∫–∏ -->
                <div class="cards">
                    <div class="card">
                        <h3>üë§ –í–∞—à—ñ —ñ–Ω—Å–∞–π—Ç–∏</h3>
                        <div id="userInsights">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
                    </div>
                    <div class="card">
                        <h3>üåç –ì–ª–æ–±–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                        <div id="globalStats">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
                    </div>
                    <div class="card">
                        <h3>üìà –í–∞—à–∞ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</h3>
                        <div id="userActivity">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
                    </div>
                </div>

                <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó -->
                <div class="card">
                    <h3>üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∞–Ω–∞–ª—ñ–∑—É</h3>
                    <div id="recommendations"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript —Ñ–∞–π–ª–∏ -->
    <script src="js/theme.js"></script>
    <script src="js/analytics.js"></script>
    
    <!-- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== Analytics Page Loaded ===');
            
            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è CSS —Ñ–∞–π–ª—ñ–≤
            const cssFiles = Array.from(document.styleSheets)
                .filter(sheet => sheet.href && sheet.href.includes('.css'))
                .map(sheet => sheet.href.split('/').pop());
            console.log('CSS files loaded:', cssFiles);
            
            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è JavaScript –º–æ–¥—É–ª—ñ–≤
            console.log('JS modules:', {
                themeManager: window.themeManager ? '‚úÖ' : '‚ùå',
                analyticsApp: window.analyticsApp ? '‚úÖ' : '‚ùå',
                Chart: window.Chart ? '‚úÖ' : '‚ùå'
            });
            
            // –ü–æ–∫–∞–∑ –ø–æ–º–∏–ª–∫–∏ —è–∫—â–æ –¥–µ—è–∫—ñ —Ñ–∞–π–ª–∏ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–ª–∏—Å—å
            if (!window.themeManager || !window.analyticsApp) {
                console.error('Some JS files failed to load');
                const errorDiv = document.createElement('div');
                errorDiv.style.cssText = `
                    position: fixed;
                    top: 10px;
                    right: 10px;
                    background: #ef4444;
                    color: white;
                    padding: 10px;
                    border-radius: 5px;
                    z-index: 10000;
                `;
                errorDiv.textContent = '–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤';
                document.body.appendChild(errorDiv);
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                setTimeout(() => errorDiv.remove(), 5000);
            }
        });
    </script>
   
</body>
</html>